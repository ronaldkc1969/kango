<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>看護師国試 社会保障クイズ（50問）</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 16px;
      line-height: 1.6;
      background: #f5f5f5;
    }
    h1 {
      font-size: 1.4rem;
      text-align: center;
      margin-bottom: 1rem;
    }
    #quiz-container {
      background: #fff;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 0.9rem;
      color: #555;
    }
    .question-text {
      font-weight: 600;
      margin-bottom: 8px;
    }
    .answers {
      margin-bottom: 12px;
    }
    .answers label {
      display: block;
      margin-bottom: 4px;
      cursor: pointer;
    }
    .answers input[type="radio"] {
      margin-right: 4px;
    }
    #explanation {
      margin-top: 12px;
      padding: 10px;
      border-radius: 6px;
      background: #eef7ff;
      border: 1px solid #c5defa;
      display: none;
      white-space: pre-wrap;
    }
    #controls {
      margin-top: 12px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    button {
      cursor: pointer;
      padding: 8px 14px;
      border-radius: 4px;
      border: none;
      background: #1976d2;
      color: #fff;
      font-size: 0.9rem;
    }
    button.secondary {
      background: #777;
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
    }
    #result {
      margin-top: 16px;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <h1>看護師国家試験 社会保障クイズ（50問）</h1>
  <div id="quiz-container">
    <div class="question-header">
      <div id="q-number"></div>
      <div id="q-meta"></div>
    </div>
    <div id="question" class="question-text"></div>
    <div id="answers" class="answers"></div>

    <div id="explanation"></div>

    <div id="controls">
      <button id="show-answer">解答・解説を表示</button>
      <button id="next" class="secondary">次の問題へ</button>
      <button id="shuffle">問題をシャッフル</button>
    </div>

    <div id="result"></div>
  </div>

  <script>
    // 50問分のデータ
    // correctIndex は 0〜3、全体として1〜4に偏らないようにばらしてある
    const questions = [
      {
        id: 1,
        type: "必修（医療保険）",
        text: "日本において国民皆保険制度となっているのはどれか。",
        choices: ["介護保険", "医療保険", "雇用保険", "労災保険"],
        correctIndex: 1,
        explanation:
"日本では原則として国民の全てが何らかの医療保険に加入する国民皆保険制度が実現している。1961年に国民皆保険が確立され、全国民が公的医療保険でカバーされている。"
      },
      {
        id: 2,
        type: "必修（医療保険）",
        text: "国民健康保険の保険者はどれか。",
        choices: ["国", "都道府県", "市町村及び特別区", "健康保険組合"],
        correctIndex: 2,
        explanation:
"国民健康保険の保険者は都道府県と市町村（及び特別区）である。2018年度から都道府県も保険者となり、市町村とともに国民健康保険の運営を担っている。"
      },
      {
        id: 3,
        type: "必修（医療保険）",
        text: "健康保険法による療養の給付の対象はどれか。",
        choices: ["手術", "予防接種", "人間ドック", "健康診査"],
        correctIndex: 0,
        explanation:
"医療給付の対象には診察、処置・手術、薬剤・治療材料、食事療養、入院・看護、在宅療養・看護、訪問看護などが含まれる。予防接種、人間ドック、健康診査などの予防活動は給付対象外である。"
      },
      {
        id: 4,
        type: "必修（医療保険）",
        text: "国民医療費に含まれる費用はどれか。",
        choices: ["予防接種", "正常な分娩", "人間ドック", "入院時の食事"],
        correctIndex: 3,
        explanation:
"国民医療費には診察、処置・手術、薬剤・治療材料、食事療養などが含まれる。正常な妊娠・分娩、予防接種、健康診断、人間ドックなどは国民医療費に含まれない。"
      },
      {
        id: 5,
        type: "必修（医療保険）",
        text: "令和5年度（2023年度）の国民医療費で正しいのはどれか。",
        choices: ["約38兆円", "約43兆円", "約48兆915億円", "約53兆円"],
        correctIndex: 2,
        explanation:
"令和5年度（2023年度）の国民医療費は48兆915億円で、前年度から3.0％増加し、3年連続で過去最高を更新している。高齢化の進展や医療の高度化が主な要因である。"
      },
      {
        id: 6,
        type: "必修（医療保険）",
        text: "令和5年度（2023年度）における人口1人当たりの国民医療費で最も近いのはどれか。",
        choices: ["28万6,700円", "33万6,700円", "38万6,700円", "43万6,700円"],
        correctIndex: 2,
        explanation:
"令和5年度（2023年度）の1人当たり国民医療費は38万6,700円で、前年度より3.5％増加している。年齢別では75歳以上が96万5,000円、75歳未満が25万2,000円と大きく異なる。"
      },
      {
        id: 7,
        type: "必修（医療保険）",
        text: "後期高齢者医療制度が定められている法律はどれか。",
        choices: ["医療法", "健康保険法", "高齢社会対策基本法", "高齢者の医療の確保に関する法律"],
        correctIndex: 3,
        explanation:
"後期高齢者医療制度は「高齢者の医療の確保に関する法律」に基づき、平成20年度に開始された。75歳以上を対象とする医療保険制度である。"
      },
      {
        id: 8,
        type: "必修（医療保険）",
        text: "後期高齢者医療制度の被保険者となる年齢で正しいのはどれか。",
        choices: ["65歳以上", "70歳以上", "75歳以上", "80歳以上"],
        correctIndex: 2,
        explanation:
"後期高齢者医療制度の被保険者は原則として75歳以上である。65～74歳で一定の障害があると認定された場合も被保険者となる。"
      },
      {
        id: 9,
        type: "必修（医療保険）",
        text: "国民健康保険に加入している40歳男性の医療費自己負担割合はどれか。",
        choices: ["1割", "2割", "3割", "4割"],
        correctIndex: 2,
        explanation:
"6歳から69歳までの一般被保険者の医療費自己負担割合は原則3割である。6歳未満は2割、70～74歳は2割（現役並み所得者は3割）、75歳以上は1割（一定以上所得者は2割または3割）である。"
      },
      {
        id: 10,
        type: "必修（医療保険）",
        text: "後期高齢者医療制度の一般所得者の医療費自己負担割合はどれか。",
        choices: ["1割", "2割", "3割", "4割"],
        correctIndex: 0,
        explanation:
"後期高齢者医療制度では、一般所得者の自己負担割合は1割である。一定以上の所得がある者は2割、現役並み所得者は3割負担となる。"
      },
      {
        id: 11,
        type: "必修（介護保険）",
        text: "介護保険制度における保険者はどれか。",
        choices: ["国", "都道府県", "市町村及び特別区", "保健所"],
        correctIndex: 2,
        explanation:
"介護保険の保険者は市町村及び特別区である。市町村が介護保険事業計画を策定し、保険料の決定や要介護認定、保険給付を行う。"
      },
      {
        id: 12,
        type: "必修（介護保険）",
        text: "介護保険法で第1号被保険者と規定されているのはどれか。",
        choices: ["40歳以上", "55歳以上", "65歳以上", "75歳以上"],
        correctIndex: 2,
        explanation:
"介護保険の第1号被保険者は65歳以上の者である。原因を問わず、要介護・要支援状態になれば介護サービスを利用できる。"
      },
      {
        id: 13,
        type: "必修（介護保険）",
        text: "介護保険の第2号被保険者は、（　）歳以上65歳未満の医療保険加入者である。",
        choices: ["30", "40", "50", "60"],
        correctIndex: 1,
        explanation:
"介護保険の第2号被保険者は40～64歳の医療保険加入者である。加齢に伴う特定疾病により要介護・要支援状態になった場合に介護サービスを利用できる。"
      },
      {
        id: 14,
        type: "必修（介護保険）",
        text: "令和5年度（2023年度）における要介護・要支援認定者数で最も近いのはどれか。",
        choices: ["508万人", "608万人", "708万人", "808万人"],
        correctIndex: 2,
        explanation:
"令和5年度末の要介護・要支援認定者数は708万人で、初めて700万人を超えた。前年度から14万人（2.0％）増加し、過去最多を更新している。"
      },
      {
        id: 15,
        type: "必修（介護保険）",
        text: "令和5年度（2023年度）における65歳以上高齢者の要介護認定率で正しいのはどれか。",
        choices: ["13.4％", "16.4％", "19.4％", "22.4％"],
        correctIndex: 2,
        explanation:
"令和5年度の65歳以上高齢者に占める要介護・要支援認定者の割合は19.4％で、約5人に1人が認定を受けている。前年度の19.0％から0.4ポイント上昇した。"
      },
      {
        id: 16,
        type: "必修（介護保険）",
        text: "要介護認定の申請先はどれか。",
        choices: ["市町村", "診療所", "都道府県", "介護保険審査会"],
        correctIndex: 0,
        explanation:
"要介護認定の申請先は市町村である。市町村が調査を行い、その結果をもとに介護認定審査会が要介護度を審査・判定する。"
      },
      {
        id: 17,
        type: "必修（介護保険）",
        text: "要介護状態の区分の審査・判定業務を行うのはどれか。",
        choices: ["介護認定審査会", "介護保険審査会", "社会福祉協議会", "社会保障審議会"],
        correctIndex: 0,
        explanation:
"介護認定審査会は、市町村に設置され、要介護状態の区分（要支援1・2、要介護1～5）の審査・判定を行う機関である。介護保険審査会は不服申立てを扱う。"
      },
      {
        id: 18,
        type: "必修（介護保険）",
        text: "介護保険法における要支援および要介護認定の状態区分の数はどれか。",
        choices: ["4", "5", "6", "7"],
        correctIndex: 3,
        explanation:
"要支援1・2と要介護1～5の合計7区分である。審査・判定により最も適切な区分が決定される。"
      },
      {
        id: 19,
        type: "必修（介護保険）",
        text: "介護保険における被保険者の要支援状態に関する保険給付はどれか。",
        choices: ["医療給付", "介護給付", "年金給付", "予防給付"],
        correctIndex: 3,
        explanation:
"要支援1・2と認定された者には予防給付が行われる。予防給付は要介護状態への移行を防ぐことや、状態の悪化防止を目的とする。要介護1～5には介護給付が行われる。"
      },
      {
        id: 20,
        type: "必修（介護保険）",
        text: "介護保険制度における施設サービス費の原則的な利用者負担割合はどれか。",
        choices: ["1割", "2割", "3割", "5割"],
        correctIndex: 0,
        explanation:
"介護保険サービスの原則的な自己負担割合は1割である。ただし、一定以上の所得がある場合は2割または3割負担となる。"
      },
      {
        id: 21,
        type: "一般（医療保険）",
        text: "社会保険制度に含まれないのはどれか。",
        choices: ["医療保険", "介護保険", "生活保護", "年金保険"],
        correctIndex: 2,
        explanation:
"社会保険制度には医療保険、年金保険、介護保険、雇用保険、労働者災害補償保険が含まれる。生活保護は社会保険ではなく、公的扶助である。"
      },
      {
        id: 22,
        type: "一般（医療保険）",
        text: "医療保険制度と根拠となる法律の組み合わせで正しいのはどれか。",
        choices: [
          "国民健康保険 ― 健康保険法",
          "健康保険 ― 健康保険法",
          "後期高齢者医療制度 ― 医療法",
          "介護保険 ― 介護保障法"
        ],
        correctIndex: 1,
        explanation:
"医療保険制度と根拠法の対応は、国民健康保険法（国民健康保険）、健康保険法（被用者保険）、高齢者の医療の確保に関する法律（後期高齢者医療制度）、介護保険法（介護保険）である。"
      },
      {
        id: 23,
        type: "一般（医療保険）",
        text: "高額療養費制度について正しいのはどれか。",
        choices: [
          "年齢制限がある",
          "所得に関係なく同じ自己負担限度額である",
          "入院のみ対象となる",
          "所得や年齢に応じて自己負担限度額が異なる"
        ],
        correctIndex: 3,
        explanation:
"高額療養費制度は、医療費の自己負担額が一定額を超えた場合に、その超えた金額が払い戻される制度である。自己負担限度額は年齢や所得に応じて設定される。"
      },
      {
        id: 24,
        type: "一般（医療保険）",
        text: "令和5年度（2023年度）における後期高齢者医療費の総額で最も近いのはどれか。",
        choices: ["9兆円", "14兆円", "19兆円", "24兆円"],
        correctIndex: 2,
        explanation:
"令和5年度の後期高齢者医療費は19兆1,503億円で、国民医療費全体の約39.8％を占める。75歳以上人口の増加に伴い、今後も増加が見込まれる。"
      },
      {
        id: 25,
        type: "一般（医療保険）",
        text: "75歳以上の後期高齢者における1人当たり医療費（令和5年度）で正しいのはどれか。",
        choices: ["56万5,000円", "76万5,000円", "96万5,000円", "116万5,000円"],
        correctIndex: 2,
        explanation:
"令和5年度の75歳以上の1人当たり医療費は96万5,000円であり、75歳未満（25万2,000円）の約3.8倍となっている。"
      },
      {
        id: 26,
        type: "一般（医療保険）",
        text: "日本の医療保険制度について正しいのはどれか。",
        choices: [
          "被用者保険の保険料は労働者のみが負担する",
          "国民皆保険であるため、保険加入は任意である",
          "健康保険の被保険者は主に企業の従業員である",
          "後期高齢者医療制度の被保険者は原則65歳以上である"
        ],
        correctIndex: 2,
        explanation:
"健康保険（被用者保険）の被保険者は企業に勤める労働者である。保険料は事業主と被保険者が折半負担し、加入は法律で義務付けられている。"
      },
      {
        id: 27,
        type: "一般（医療保険）",
        text: "協会けんぽ（全国健康保険協会）の主な被保険者はどれか。",
        choices: ["大企業の従業員", "中小企業の従業員", "自営業者", "公務員"],
        correctIndex: 1,
        explanation:
"協会けんぽは主に中小企業で働く人とその家族が加入する医療保険である。大企業は独自の健康保険組合を持つことが多い。"
      },
      {
        id: 28,
        type: "一般（医療保険）",
        text: "公費医療と根拠法の組み合わせで正しいのはどれか。",
        choices: [
          "未熟児養育医療 ― 母子保健法",
          "結核児童への医療 ― 感染症法",
          "難病患者医療費助成 ― 児童福祉法",
          "小児慢性特定疾病医療費助成 ― 難病法"
        ],
        correctIndex: 0,
        explanation:
"未熟児養育医療は母子保健法に規定される公費医療である。難病患者医療費助成は難病法、小児慢性特定疾病医療費助成は児童福祉法に基づく。"
      },
      {
        id: 29,
        type: "一般（医療保険）",
        text: "令和5年度（2023年度）の国民医療費の財源構成について正しいのはどれか。",
        choices: [
          "患者負担が最も大きい",
          "保険料が最も大きい割合を占める",
          "公費と保険料の割合が等しい",
          "その他の財源が全体の30％以上を占める"
        ],
        correctIndex: 1,
        explanation:
"令和5年度の国民医療費の財源構成は、保険料が約50％で最も大きく、次いで公費が約38％、患者負担が約12％となっている。"
      },
      {
        id: 30,
        type: "一般（医療保険）",
        text: "後期高齢者医療制度の自己負担割合について正しいのはどれか。",
        choices: [
          "全員が1割負担である",
          "一般所得者は3割負担である",
          "一般所得者は1割、一定以上の所得者は2割または3割である",
          "現役並み所得者は1割負担である"
        ],
        correctIndex: 2,
        explanation:
"後期高齢者医療制度では、一般所得者の自己負担割合は1割であり、一定以上の所得がある者は2割、現役並み所得者は3割となる。"
      },
      {
        id: 31,
        type: "一般（人口動態）",
        text: "2023年における日本の合計特殊出生率で正しいのはどれか。",
        choices: ["1.00", "1.20", "1.50", "1.80"],
        correctIndex: 1,
        explanation:
"2023年の合計特殊出生率は1.20で、過去最低を更新した。人口を維持するために必要とされる水準（約2.07）を大きく下回っている。"
      },
      {
        id: 32,
        type: "一般（人口動態）",
        text: "2023年における日本人女性の平均寿命で正しいのはどれか。",
        choices: ["83.14歳", "85.14歳", "87.14歳", "89.14歳"],
        correctIndex: 2,
        explanation:
"2023年の日本人女性の平均寿命は87.14歳である。男性は81.09歳であり、いずれも世界的に見て高い水準にある。"
      },
      {
        id: 33,
        type: "一般（人口動態）",
        text: "2024年における日本の高齢化率（65歳以上人口の割合）で正しいのはどれか。",
        choices: ["23.3％", "26.3％", "29.3％", "32.3％"],
        correctIndex: 2,
        explanation:
"2024年の高齢化率は29.3％であり、過去最高を更新している。65歳以上人口は約3,625万人である。"
      },
      {
        id: 34,
        type: "一般（人口動態）",
        text: "2024年における75歳以上人口の総人口に占める割合で正しいのはどれか。",
        choices: ["10.8％", "13.8％", "16.8％", "19.8％"],
        correctIndex: 2,
        explanation:
"2024年の75歳以上人口は約2,076万人で、総人口の16.8％を占める。今後も団塊の世代の後期高齢者化により増加が続くと見込まれる。"
      },
      {
        id: 35,
        type: "一般（人口動態）",
        text: "2023年における出生数で最も近いのはどれか。",
        choices: ["約52万人", "約62万人", "約73万人", "約83万人"],
        correctIndex: 2,
        explanation:
"2023年の出生数は約72万7千人で、統計開始以来最少となった。少子化の進行が続いている。"
      },
      {
        id: 36,
        type: "一般（人口動態）",
        text: "国民医療費が増加する主な要因として正しいのはどれか。",
        choices: [
          "高齢者人口の減少",
          "医療技術の停滞",
          "高齢化の進展と医療の高度化",
          "出生率の上昇"
        ],
        correctIndex: 2,
        explanation:
"国民医療費の増加要因は、高齢化の進展と医療技術の高度化である。高齢者の医療費は若年層より大きい。"
      },
      {
        id: 37,
        type: "一般（人口動態）",
        text: "介護保険と医療保険の関係について正しいのはどれか。",
        choices: [
          "介護保険は医療保険に統合されている",
          "介護費用は医療保険で給付される",
          "医療費は介護保険で給付される",
          "介護保険と医療保険は別々の制度として運営される"
        ],
        correctIndex: 3,
        explanation:
"介護保険と医療保険は別々の制度として運営されている。医療保険は傷病の治療費、介護保険は介護サービス費用を給付対象とする。"
      },
      {
        id: 38,
        type: "一般（人口動態）",
        text: "社会保障給付費に含まれるのはどれか。",
        choices: ["教育給付費", "文化給付費", "医療給付費", "防衛給付費"],
        correctIndex: 2,
        explanation:
"社会保障給付費には医療、年金、福祉などに関する給付費が含まれる。教育や防衛は社会保障給付には含まれない。"
      },
      {
        id: 39,
        type: "一般（人口動態）",
        text: "地域包括ケアシステムの構築主体はどれか。",
        choices: ["国", "都道府県", "市町村", "医療機関"],
        correctIndex: 2,
        explanation:
"地域包括ケアシステムは市町村を中心に構築される。医療・介護・予防・住まい・生活支援を一体的に提供する体制である。"
      },
      {
        id: 40,
        type: "一般（人口動態）",
        text: "令和5年度（2023年度）の介護保険給付費で最も近いのはどれか。",
        choices: ["5兆8,263億円", "8兆8,263億円", "10兆8,263億円", "12兆8,263億円"],
        correctIndex: 2,
        explanation:
"令和5年度の介護保険給付費は10兆8,263億円で、前年度から増加し過去最高を更新している。"
      },
      {
        id: 41,
        type: "一般（社会福祉）",
        text: "令和5年度（2023年度）における生活保護の被保護実世帯数で最も近いのはどれか。",
        choices: ["125万世帯", "145万世帯", "165万世帯", "185万世帯"],
        correctIndex: 2,
        explanation:
"令和5年度の生活保護被保護実世帯数は165万478世帯である。新型コロナや物価高騰などの影響が指摘されている。"
      },
      {
        id: 42,
        type: "一般（社会福祉）",
        text: "令和5年度（2023年度）における生活保護の保護率（人口100人対）で正しいのはどれか。",
        choices: ["0.62％", "1.62％", "2.62％", "3.62％"],
        correctIndex: 1,
        explanation:
"令和5年度の保護率は1.62％であり、約62人に1人が生活保護を受給している計算となる。"
      },
      {
        id: 43,
        type: "一般（社会福祉）",
        text: "令和5年度（2023年度）における生活保護の被保護実人員で最も近いのはどれか。",
        choices: ["172万人", "202万人", "232万人", "262万人"],
        correctIndex: 1,
        explanation:
"令和5年度の生活保護被保護実人員は202万4,586人である。世帯数は増加傾向、人員は横ばいから微減傾向にある。"
      },
      {
        id: 44,
        type: "一般（社会福祉）",
        text: "令和5年度（2023年度）における身体障害者手帳交付台帳登載数で最も近いのはどれか。",
        choices: ["378万人", "428万人", "478万人", "528万人"],
        correctIndex: 2,
        explanation:
"令和5年度末の身体障害者手帳交付台帳登載数は約478万3千人である。肢体不自由と内部障害で全体の約8割を占める。"
      },
      {
        id: 45,
        type: "一般（社会福祉）",
        text: "身体障害者手帳交付者のうち最も多い障害の種類はどれか。",
        choices: ["視覚障害", "聴覚障害", "肢体不自由", "内部障害"],
        correctIndex: 2,
        explanation:
"身体障害者手帳交付者の障害種類別では、肢体不自由が最も多く、約48.8％を占める。次いで内部障害が多い。"
      },
      {
        id: 46,
        type: "一般（社会福祉）",
        text: "令和5年度（2023年度）における療育手帳交付台帳登載数で最も近いのはどれか。",
        choices: ["88万人", "108万人", "128万人", "148万人"],
        correctIndex: 2,
        explanation:
"令和5年度末の療育手帳交付台帳登載数は約128万1千人であり、近年増加傾向にある。"
      },
      {
        id: 47,
        type: "一般（社会福祉）",
        text: "乳児家庭全戸訪問事業の対象となる乳児の月齢で正しいのはどれか。",
        choices: ["原則生後2か月まで", "原則生後4か月まで", "原則生後6か月まで", "原則生後12か月まで"],
        correctIndex: 1,
        explanation:
"乳児家庭全戸訪問事業は、原則として生後4か月を迎えるまでのすべての乳児のいる家庭を対象として実施される事業である。"
      },
      {
        id: 48,
        type: "一般（社会福祉）",
        text: "社会福祉と公的扶助の関係で正しいのはどれか。",
        choices: [
          "公的扶助は社会福祉に含まれない",
          "公的扶助は社会保障に含まれない",
          "公的扶助は税を財源としない",
          "公的扶助は社会福祉の一部である"
        ],
        correctIndex: 3,
        explanation:
"社会福祉には生活保護（公的扶助）、児童福祉、障害者福祉、高齢者福祉などが含まれる。公的扶助は社会福祉の一部であり、税を主な財源とする。"
      },
      {
        id: 49,
        type: "一般（社会福祉）",
        text: "障害者基本法で規定されている内容として正しいのはどれか。",
        choices: [
          "障害者の定義のみを規定している",
          "障害者の定義と障害者施策の基本的方向を規定している",
          "障害者福祉施設の設置基準のみを規定している",
          "身体障害者手帳の交付基準のみを規定している"
        ],
        correctIndex: 1,
        explanation:
"障害者基本法は、障害者の定義および障害者施策の基本的方向を規定する法律であり、各種障害者施策の根拠となる。"
      },
      {
        id: 50,
        type: "一般（社会福祉）",
        text: "日本の社会保障制度が抱える主な課題として正しいのはどれか。",
        choices: [
          "高齢化に伴う社会保障給付費の減少",
          "労働人口減少による保険料負担の軽減",
          "高齢化に伴う給付費増と労働人口減少による負担増",
          "医療技術の停滞による医療費増加"
        ],
        correctIndex: 2,
        explanation:
"日本の社会保障制度は、高齢化に伴う給付費の増加と、労働人口減少による保険料負担の増加という二重の課題を抱えている。"
      }
    ];

    // Fisher–Yates シャッフル
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    let currentIndex = 0;

    const qNumberEl = document.getElementById("q-number");
    const qMetaEl = document.getElementById("q-meta");
    const questionEl = document.getElementById("question");
    const answersEl = document.getElementById("answers");
    const explanationEl = document.getElementById("explanation");
    const showAnswerBtn = document.getElementById("show-answer");
    const nextBtn = document.getElementById("next");
    const shuffleBtn = document.getElementById("shuffle");
    const resultEl = document.getElementById("result");

    function renderQuestion(index) {
      const q = questions[index];
      if (!q) return;

      qNumberEl.textContent = `Q${index + 1} / ${questions.length}`;
      qMetaEl.textContent = q.type || "";
      questionEl.textContent = q.text;

      // 選択肢の描画（ラジオボタン）
      answersEl.innerHTML = "";
      explanationEl.style.display = "none";
      explanationEl.textContent = "";
      resultEl.textContent = "";

      q.choices.forEach((choice, i) => {
        const id = `q${index}_choice${i}`;
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "radio";
        input.name = "answer";
        input.value = i;
        input.id = id;

        label.appendChild(input);
        label.appendChild(document.createTextNode(" " + choice));
        answersEl.appendChild(label);
      });
    }

    function getSelectedIndex() {
      const radios = answersEl.querySelectorAll("input[type=radio]");
      for (const r of radios) {
        if (r.checked) {
          return parseInt(r.value, 10);
        }
      }
      return null;
    }

    showAnswerBtn.addEventListener("click", () => {
      const q = questions[currentIndex];
      const selected = getSelectedIndex();

      if (selected === null) {
        alert("解答を1つ選択してください。");
        return;
      }

      const radios = answersEl.querySelectorAll("input[type=radio]");
      radios.forEach((r, i) => {
        const label = r.parentElement;
        label.style.fontWeight = "normal";
        label.style.color = "inherit";
        if (i === q.correctIndex) {
          label.style.color = "#1b5e20"; // 正解：緑
          label.style.fontWeight = "600";
        }
        if (i === selected && i !== q.correctIndex) {
          label.style.color = "#c62828"; // 誤答：赤
        }
      });

      const isCorrect = selected === q.correctIndex;
      resultEl.textContent = isCorrect ? "正解です。" : "不正解です。";

      explanationEl.style.display = "block";
      explanationEl.textContent = `【正解】${q.choices[q.correctIndex]}\n\n【解説】\n${q.explanation}`;
    });

    nextBtn.addEventListener("click", () => {
      currentIndex++;
      if (currentIndex >= questions.length) {
        currentIndex = 0;
      }
      renderQuestion(currentIndex);
    });

    shuffleBtn.addEventListener("click", () => {
      shuffle(questions);
      currentIndex = 0;
      renderQuestion(currentIndex);
    });

    // 初期表示
    renderQuestion(currentIndex);
  </script>
</body>
</html>
